<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Enviar Notificação</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<h1>Enviar Notificação</h1>

<form id="form">
  <label>Título: <input name="title" value="Teste"></label><br>
  <label>Mensagem: <input name="body" value="Notificação do PWA"></label><br>
  <label>Token: <input name="token" id="token"></label><br>
  <button type="submit">Enviar</button>
</form>

<pre id="resposta"></pre>

<script>
document.getElementById('token').value = localStorage.getItem('token') || '';

document.getElementById('form').addEventListener('submit', async (e) => {
  e.preventDefault();

  const title = e.target.title.value;
  const body = e.target.body.value;
  const token = e.target.token.value;

  const bodyJson = {
    message: {
      token,
      notification: { title, body },
      webpush: {
        fcm_options: {
          link: location.origin
        }
      }
    }
  };

  const result = await fetch('https://fcm.googleapis.com/v1/projects/SEU_PROJECT_ID/messages:send', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer COLOQUE_AQUI_SEU_ACCESS_TOKEN`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(bodyJson)
  });

  const data = await result.json();
  document.getElementById('resposta').textContent = JSON.stringify(data, null, 2);
});
</script>
</body>
</html>
